# NAddressParser

Оффлайн разборщик адресов. Используется для массовой проверки адресов при импорте. 
В отличие от множества сервисов не требует подключения к интернету, поэтому возможны некоторые неточности, но это лучше чем ничего :)

## Ограничения  и системные требования
Модуль подгружает все словари при своем создании, поэтому используется примерно 800 Мб памяти, учитывайте это. 
Также желательно создать 1 экземпляр на приложение и в дальнейшем его использовать. 

## Установка

Добавьте пакеты nuget  NAddressParser, NAddressParser.Data в  ваш проект. 


## Использование

Простой пример 
```C#
var address = "426011, Удмуртская Республика, г. Ижевск, 10 Лет Октября,17 а, номера помещений на поэтажном плане 122-137";
var parser = new AddressParser();
var normalized = parser.Parse(address);
```
Указание пользовательской директории со словарями
```C#
var address = "426011, Удмуртская Республика, г. Ижевск, 10 Лет Октября,17 а, номера помещений на поэтажном плане 122-137";
var parser = new AddressParser("CustomDistionaryDir");
var normalized = parser.Parse(address);

```

## Расширение
Механизм для расширения функциональности, если вы нашли ошибку.

Механизм файла **Data\replace.txt**

```
# Это строка комментария не учитывается при замене
// Это тоже строка комментария.
# Формат этого файла следующий: одна строка одна запись замены, регистр в первом значении не имеет значения, сравнение идет в  верхнем регистре.
# Разделитель "#;" - без кавычек
# Обратите внимание  на то как ваш редактор сохраняет символы табуляции, вам нужно именно сохранение в виде спец символов а не пробелов 
Нерезиновск#;Москва
```

Механизм плагинов с реализацией интерфейса  **IAddressFix**

```C#
public class LeningradFixer : IAddressFix
{
    public string Fix(string address) => address.ReplaceIgnoreCase("Ленинград", "Санкт-Петербург");
    
}
 var address = "197373, г. Ленинград, Глухарская улица, дом 16, корпус 2, литера А";
 var exp = "197373, г. Санкт-Петербург, Глухарская улица, дом 16, корпус 2, литера А";
 var parser = new AddressParser();
 parser.AddFixer(new LeningradFixer());
 var normalized = parser.Parse(address);
 Assert.AreEqual(exp, normalized.Raw);
```



## Изменения

20  июня 2020 - Первый релиз


